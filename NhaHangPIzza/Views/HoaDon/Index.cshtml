@using NhaHangPIzza.Models

@{
    ViewBag.Title = "Đơn hàng";
    Layout = "~/Views/Shared/_LayoutTrangChu.cshtml";
}

<div class="container mt-4">
    <h2>Thông tin đơn hàng</h2>

    <!-- Phần Mã Hoá Đơn -->
    <div class="mb-4">
        <label for="ddlBan" class="form-label">Tên bàn:</label>
        <select id="ddlBan" class="form-select" onchange="checkPassword()">
            @{
                // Hiển thị danh sách bàn từ ViewBag.DanhSachBan
                List<BAN> danhSachBan = ViewBag.DanhSachBan;
                foreach (var ban in danhSachBan)
                {
                    <option value="@ban.Maban">@ban.TenBan</option>
                }
            }
        </select>
    </div>
    <!-- Phần Bánh Pizza -->
    <div class="mb-4 border p-3">
        <h4>Bánh Pizza</h4>

        <!-- Mỗi sản phẩm pizza -->
        <div class="row border-bottom pb-3">
            <div class="col-md-3">
                <img src="~/Images/BanhPizza/Pizzazahoivaraubina.jpeg" alt="Pizza Image" class="img-fluid product-image" style="max-width: 165px; max-height: 165px;" />
            </div>
            <div class="col-md-3">
                <h5>Tên Bánh Pizza: Pizza Margherita 1</h5>
            </div>
            <div class="col-md-2">
                <p>Số lượng: <span class="quantity">2</span></p>
            </div>
            <div class="col-md-2">
                <p>Giá: $10.99</p>
            </div>
            <div class="col-md-2">
                <button class="btn btn-primary btn-plus" onclick="incrementQuantity(this)">+</button>
                <button class="btn btn-danger btn-minus" onclick="decrementQuantity(this)">-</button>
            </div>
        </div>

        <!-- Mỗi sản phẩm pizza khác nếu cần -->

        <div class="row border-bottom pb-3">
            <div class="col-md-3">
                <img src="~/Images/BanhPizza/Pizzaphomaicaocap.jpeg" alt="Pizza Image" class="img-fluid product-image" style="max-width: 165px; max-height: 165px;" />
            </div>
            <div class="col-md-3">
                <h5>Tên Bánh Pizza: Pizza Margherita 2</h5>
            </div>
            <div class="col-md-2">
                <p>Số lượng: <span class="quantity">2</span></p>
            </div>
            <div class="col-md-2">
                <p>Giá: $10.99</p>
            </div>
            <div class="col-md-2">
                <button class="btn btn-primary btn-plus" onclick="incrementQuantity(this)">+</button>
                <button class="btn btn-danger btn-minus" onclick="decrementQuantity(this)">-</button>
            </div>
        </div>
    </div>

    <!-- Phần Nước Giải Khát -->
    <div class="mb-4 border p-3">
        <h4>Nước Giải Khát</h4>

        <!-- Mỗi sản phẩm nước giải khát -->
        <div class="row border-bottom pb-3">
            <div class="col-md-3">
                <img src="~/Images/NuocGiaiKhat/BonAqua.jpeg" alt="Drink Image" class="img-fluid product-image" style="max-width: 165px; max-height: 165px;" />
            </div>
            <div class="col-md-3">
                <h5>Tên Nước Giải Khát: Bon-aqua</h5>
            </div>
            <div class="col-md-2">
                <p>Số lượng: <span class="quantity">3</span></p>
            </div>
            <div class="col-md-2">
                <p>Giá: $2.49</p>
            </div>
            <div class="col-md-2">
                <button class="btn btn-primary btn-plus" onclick="incrementQuantity(this)">+</button>
                <button class="btn btn-danger btn-minus" onclick="decrementQuantity(this)">-</button>
            </div>
        </div>

        <!-- Mỗi sản phẩm nước giải khát khác nếu cần -->

        <div class="row border-bottom pb-3">
            <div class="col-md-3">
                <img src="~/Images/NuocGiaiKhat/Burn.jpeg" alt="Drink Image" class="img-fluid product-image" style="max-width: 165px; max-height: 165px;" />
            </div>
            <div class="col-md-3">
                <h5>Tên Nước Giải Khát: Burn</h5>
            </div>
            <div class="col-md-2">
                <p>Số lượng: <span class="quantity">3</span></p>
            </div>
            <div class="col-md-2">
                <p>Giá: $2.49</p>
            </div>
            <div class="col-md-2">
                <button class="btn btn-primary btn-plus" onclick="incrementQuantity(this)">+</button>
                <button class="btn btn-danger btn-minus" onclick="decrementQuantity(this)">-</button>
            </div>
        </div>
    </div>

    <!-- Phần Tổng Giá -->
    <div class="mb-4 border p-3">
        <h4>Tổng Giá: <span class="text-danger">$35.94</span></h4>
    </div>

    <!-- Nút Đặt Hoá Đơn -->
    <div>
        <button class="btn btn-primary" onclick="placeOrder()">Đặt Hoá Đơn</button>
    </div>
</div>
<script>
    // Khởi tạo biến isDropdownEnabled
    var isDropdownEnabled = true;

    function checkPassword() {
        if (!isDropdownEnabled) {
            alert("Vui lòng nhập lại mật khẩu.");
            return;
        }

        var password = prompt("Nhập mật khẩu để chọn bàn:");

        // Kiểm tra mật khẩu
        if (password === "1234") {
            // Mật khẩu đúng, không cần làm gì cả
        } else {
            // Mật khẩu sai, không cho phép chọn bàn và reset dropdown về giá trị mặc định
            document.getElementById("ddlBan").selectedIndex = 0;
            alert("Mật khẩu không đúng. Vui lòng thử lại.");
        }
    }
    function incrementQuantity(button) {
        var quantityElement = $(button).parent().siblings('.col-md-2').find('.quantity');
        var quantity = parseInt(quantityElement.text());
        quantity++;
        quantityElement.text(quantity);
    }

    function decrementQuantity(button) {
        var quantityElement = $(button).parent().siblings('.col-md-2').find('.quantity');
        var quantity = parseInt(quantityElement.text());

        if (quantity > 1) {
            quantity--;
            quantityElement.text(quantity);
        }
    }

    function placeOrder() {
        alert('Đã đặt hoá đơn thành công!');
    }
</script>